# <en> Attention! The names of the tables used in a query, you must specify the prefix specified in the settings to connect to the database. </en>
# <ru> Внимание! В именах таблиц, используемых в запросах, необходимо указать префикс, указанный в настройках подключения к базе данных. </ru>

# <en> The data source for search </en>
# <ru> Источник данных для поиска </ru>
source taberna
{
	# <en> Data types [mysql, pgsql, mssql, xmlpipe, xmlpipe2, odbc] </en>
	# <ru> Типы данных [mysql, pgsql, mssql, xmlpipe, xmlpipe2, odbc] </ru>
	type = mysql

	# <en> Settings to connect to the database </en>
	# <ru> Параметры для подключения к базе данных </ru>
	sql_host = localhost
    sql_user =
    sql_pass =
	sql_db =
	sql_port = 3306	# опциональный, по умолчанию 3306

	# <en> Preset encoding </en>
	# <ru> Предварительная установка кодировки </ru>
	sql_query_pre = SET NAMES utf8
}

source articles : taberna
{
	# <en> Retrieving articles. The first field should go a unique ID </en>
	# <ru> Получение данных по статьям. Первым полем должен идти уникальный ID </ru>
	sql_query = SELECT \
			art_id as id, \
			art_title, \
			art_shortdesc, \
			art_fulldesc \
		FROM \
			rad_articles

	sql_query_info = SELECT * FROM rad_articles WHERE art_id = $id;
}

# <en> Index catalog search </en>
# <ru> Индекс каталога товаров для поиска </ru>
index articles
{
    # <en> Data source </en>
    # <ru> Источник данных </ru>
    source = articles

    # <en> Address to store the indexed data </en>
    # <ru> Адрес для хранения индексированных данных </ru>
    path = /var/lib/sphinxsearch/data/articles

    # <en> Encoding </en>
    # <ru> Кодировка </ru>
    charset_type  = utf-8

    min_infix_len = 1
}

source pages : taberna
{
	# <en> Retrieving pages. The first field should go a unique ID </en>
	# <ru> Получение данных по страницам. Первым полем должен идти уникальный ID </ru>
    sql_query = SELECT \
			pg_id as id, \
			pg_title, \
			pg_shortdesc, \
			pg_fulldesc \
		FROM \
			rad_pages

	sql_query_info = SELECT * FROM rad_pages WHERE pg_id = $id;
}

# <en> Index catalog search </en>
# <ru> Индекс каталога товаров для поиска </ru>
index pages
{
    # <en> Data source </en>
    # <ru> Источник данных </ru>
    source = pages

    # <en> Address to store the indexed data </en>
    # <ru> Адрес для хранения индексированных данных </ru>
    path = /var/lib/sphinxsearch/data/pages

    # <en> Encoding </en>
    # <ru> Кодировка </ru>
    charset_type = utf-8

    min_infix_len = 1
}

source news : taberna
{
	# <en> Retrieving news. The first field should go a unique ID </en>
	# <ru> Получение данных по новостям. Первым полем должен идти уникальный ID </ru>
    sql_query = SELECT \
			nw_id as id, \
			nw_title, \
			nw_shortdesc, \
			nw_fulldesc \
		FROM \
			rad_news

	sql_query_info = SELECT * FROM rad_news WHERE nw_id = $id;
}

# <en> Index catalog search </en>
# <ru> Индекс каталога товаров для поиска </ru>
index news
{
    # <en> Data source </en>
    # <ru> Источник данных </ru>
    source = news

    # <en> Address to store the indexed data </en>
    # <ru> Адрес для хранения индексированных данных </ru>
    path = /var/lib/sphinxsearch/data/news

    # <en> Encoding </en>
    # <ru> Кодировка </ru>
    charset_type = utf-8

    min_infix_len = 1
}

source catalog : taberna
{
	# <en> Retrieving catalog. The first field should go a unique ID </en>
	# <ru> Получение данных по каталогу. Первым полем должен идти уникальный ID </ru>
    sql_query  = SELECT \
			cat_id as id, \
			cat_name, \
			cat_shortdesc, \
			cat_fulldesc \
		FROM \
			rad_catalog

	sql_query_info = SELECT * FROM rad_catalog WHERE cat_id = $id;
}

# <en> Index catalog search </en>
# <ru> Индекс каталога товаров для поиска </ru>
index catalog
{
    # <en> Data source </en>
    # <ru> Источник данных </ru>
    source = catalog

    # <en> Address to store the indexed data </en>
    # <ru> Адрес для хранения индексированных данных </ru>
    path = /var/lib/sphinxsearch/data/catalog

    # <en> Encoding </en>
    # <ru> Кодировка </ru>
    charset_type = utf-8

    min_infix_len = 1
}

# <en> Indexer </en>
# <ru> Индексатор </ru>
indexer
{
	# <en> Allocated memory </en>
    # <ru> Выделяемая память </ru>
	mem_limit = 64M
}

# <en> Search service </en>
# <ru> Поисковая служба </ru>
searchd
{
	# <en> Port and protocol </en>
    # <ru> Порт и протокол </ru>
    listen = localhost:3312:mysql41
    listen = localhost:3307

    # <en> Log file </en>
    # <ru> Лог-файл </ru>
    log = /var/log/sphinxsearch/searchd.log

    # <en> Log file with query </en>
    # <ru> Лог-файл с запросами </ru>
    query_log = /var/log/sphinxsearch/query.log

    # <en> PID file </en>
    # <ru> PID-файл </ru>
    pid_file = /var/run/searchd.pid
}